<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>Let's Train!</title>
  </head>
  <body>
    <p id="p1"></p>

    <button type="startButton">Let's Train!</button>
      <script>
        // JavaScript file for shotokai project

        let stances = [ 
            Seiza = "Seiza https://static.wixstatic.com/mp3/849542_4e9ef9c3a13b44afb8ec3a8e499d815d.mp3",
            Hachiji_dachi = "Hachiji-dachi https://static.wixstatic.com/mp3/849542_f6ca1437d7a942ebaa01900e7783e007.mp3",
            Kiba_dachi = "Kiba-dachi https://static.wixstatic.com/mp3/849542_3df85ae05a464c3180a71c3be136681d.mp3",
            Zenkutsu_dachi = "Zenkutsu https://static.wixstatic.com/mp3/849542_1d213302d4154218927698cc5cfe94cd.mp3",
            Kokutsu_dachi = "Kokutsu-dachi https://static.wixstatic.com/mp3/849542_e5f8e6433b4e482fa4befbf372c69539.mp3",
            Fudo_dachi = "Fudo-dachi https://static.wixstatic.com/mp3/849542_cc9178564df146c3a236793aea8973dc.mp3"
            ]

        let hand_techniques = [ Oi_tsuki = "Oi_tsuki.mp3",
            Mae_te_tsuki = "Mae_te_tsuki.mp3",
            Gyaku_tsuki = "Gyaku_tsuki.mp3",
            Uraken = "Uraken",
            Empi = "Empi",
            Shomen_uchi = "Shomen Uchi",
            Yokomen_uchi = "Yokomen Uchi",
            Tetsui = "Tetsui",
            Morote_tsuki = "Morote Tsuki",
            Yama_tsuki = "Yama Tsuki" ]

        let kicks = [ Mae_geri = "Mae_geri.mp3",
            Yoko_geri_kekomi = "Yoko_geri_kekomi.mp3",
            Yoko_geri_keage = "Keage",
            Fumikomi = "Fumi_komi.mp3",
            Mawashi_geri = "Mawashi",
            Mikazuki_geri = "Mikazuki",
            Aori_geri = "Aori",
            Nami_gaeshi = "Nami Gaeshi",
            Hiza_tsuchi = "Hiza Tsuchi",
            Nidan_geri = "Nidan" ]

        let blocks = [ Gedan_barai = "Gedan_barai.mp3",
            Teisho_barai = "teisho_barai.mp3",
            Udi_uke = "Udi_uke.mp3",
            Uchikomi = "Uchikomi.mp3",
            Age_uke = "Age_uke.mp3",
            Shuto_uke = "Shuto Uke",
            Shuto_barai = "Shuto Barai",
            Morote_uke = "Morote Uke" ]

        let general = [ T_ShodanTate_tsuki = "Tate_tsuki",
            Seiken = "Seiken",
            Hiki_te = "Hiki_te.mp3",
            Gedan = "Gedan",
            Chudan = "Chudan",
            Jodan = "Jodan",
            Irimi = "Irimi.mp3" ]

        let Taikyoku = [ T_Shodan = "Taikyoku_Shodan.mp3",
            T_Nidan = "Taikyoku_Nidan.mp3",
            T_Sandan = "Taikyoku_Sandan.mp3" ]

        let Heian = [ H_Shodan = "Heian_Shodan.mp3",
            H_Nidan = "Heian_Nidan.mp3",
            H_Sandan = "Heian_Sandan.mp3" ]

        let Tekki = [ Te_Shodan = "Tekki_Shodan.mp3" ]

        let redStances = [Seiza, Kiba_dachi, Zenkutsu_dachi, Kokutsu_dachi, Fudo_dachi]
        let redHands = [Oi_tsuki]
        let redKicks = [Mae_geri]

        let redBlocks = [Gedan_barai, Udi_uke]
        let redGeneral = [Hiki_te]

        let redKata = Taikyoku + H_Shodan

        let redExercise = redStances + redHands + redKicks + redBlocks + redGeneral


        let orangeStances = redStances
        let orangeHands = [Gyaku_tsuki]
        let orangeKicks = [Fumikomi, Yoko_geri_kekomi]
        let orangeBlocks = [Teisho_barai, Age_uke, Uchikomi]
        let orangeGeneral = [Irimi]

        let orangeKata = [Heian, Te_Shodan]

        let orangeExercise = orangeStances + orangeHands + orangeKicks + orangeBlocks + orangeGeneral


        function printItem(item_str) {
            let str_arr = item_str.split(" ");
            let out_str = str_arr[0];
            console.log(out_str);
            //document.write(out_str);
            document.getElementById("p1").innerHTML = out_str;
        }

        function playSound(item_str) {
            let split_url = item_str.split(" ");
            let url = split_url[1];
            let a = new Audio(url);
            let promise = a.play();
        }

        function getRandIndex(n) {
            // Integrate later
            Math.floor(Math.random() * n);
        }

        function determineExercise(belt_str) {
            if (belt_str.includes("red") | belt_str.includes("Red")) {
                return redStances
            }
        }

        function getBeltFromUser() {
            let beltString = prompt("Please enter the belt grade you wish to practice for", "");
            let beltExercise = determineExercise(beltString);

            if (beltExercise == null) {
              document.getElementById("p1").innerHTML = "reload the page";
            }

            else {
                doExercise(beltExercise);
            }
        }

        function doExercise(beltExercise) {
            let n = beltExercise.length;

            for (let i = 0; i < n; i++) {
                let item = beltExercise[i];
                setTimeout(() => {  
                    printItem(item); 
                    playSound(item);
                }, (4000 * i));
            }
        }
        /*window.onload = function() { 
        // Currently Debugging this section
        document.getElementById("startButton").onclick = function(){getBeltFromUser()}
    };*/
        setTimeout(() => {getBeltFromUser();}, "2000");

    </script>
  </body>

</html>